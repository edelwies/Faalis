<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Dashboard DSL â€” Faalis Guides</title>
<link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

<link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shCore.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shThemeRailsGuides.css" />

<link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />

<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body class="guide">
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="http://faalis.io/"> Faalis.io:</a> </strong>
      <span class="red-button more-info-button">
        More Faalis
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="http://faalis.io/">Overview</a></li>
        <li class="more-info"><a href="https://github.com/Yellowen/Faalis">Code</a></li>
        <li class="more-info"><a href="http://faalis.io/documentation">API Documentation</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">guides.faalis.io</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Guides Index</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>Start Here</dt>
                <dd><a href="getting_started.html">Getting Started with Faalis</a></dd>
                <dt>Dashboard</dt>
                <dd><a href="dashboard.html">Overview</a></dd>
                <dd><a href="dashboard_sidebar.html">Dashboard Sidebar</a></dd>
                <dd><a href="dashboard_dsl.html">Dashboard DSL</a></dd>
                <dt>Authentication &amp; Authorization</dt>
                <dd><a href="authentication.html">Authentication</a></dd>
                <dd><a href="authorization.html">Authorization</a></dd>
                <dt>Client Side application</dt>
                <dd><a href="misc_functions.html">Misc Functions</a></dd>
              </dl>
              <dl class="R">
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="credits.html">Credits</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guides Index</option>
              <optgroup label="Start Here">
                  <option value="getting_started.html">Getting Started with Faalis</option>
              </optgroup>
              <optgroup label="Dashboard">
                  <option value="dashboard.html">Overview</option>
                  <option value="dashboard_sidebar.html">Dashboard Sidebar</option>
                  <option value="dashboard_dsl.html">Dashboard DSL</option>
              </optgroup>
              <optgroup label="Authentication &amp; Authorization">
                  <option value="authentication.html">Authentication</option>
                  <option value="authorization.html">Authorization</option>
              </optgroup>
              <optgroup label="Client Side application">
                  <option value="misc_functions.html">Misc Functions</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Dashboard DSL</h2><p>This guide will teach you the DSL to enhance your dashboard.</p><p>This guide covers all the methods and solutions to enhance any section of <strong>Faalis</strong> dashboard.</p><p>After reading this guide, you will know:</p>
<ul>
<li>How to enhance any section within your dashboard.</li>
<li>Different solutions for dashboard enhancement.</li>
<li>All the possible dashboard DSL methods.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li>
<a href="#dashboard-controller-dsl">Dashboard Controller DSL</a>

<ul>
<li><a href="#in-section">in_&lt;section&gt;</a></li>
<li><a href="#attributes">attributes</a></li>
<li><a href="#attributes-properties">attributes_properties</a></li>
<li><a href="#scope">scope</a></li>
<li><a href="#action-button">action_button</a></li>
<li><a href="#tool-action">tool_action</a></li>
</ul>
</li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="dashboard-controller-dsl">1 Dashboard Controller DSL</h3><p>Do you remember the rule one ? The dashboard subsystem is just a Rails application nothing special. But you can use
the <code>Faalis::Dashboard::ApplicationController</code> as you're parent controller ( if you use the easy solution you're already
doing that ) and benefit from the <strong>DSL</strong> of <strong>Faalis</strong> dashboard controller. This way you can tweak your dashboard interface in
the way you want.</p><p>Generally there is three main sections for each resource in dashboard, <code>index</code>, <code>new</code> and <code>edit</code> sections. And a forth section that
is just a shortcut for both <code>new</code> and <code>edit</code> sections that is <code>form</code> section. Each section have different DSL but there are several
shared methods between them. First of all you need to specify the section you want to tweak. This is easy, you can do like this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
in_&lt;section&gt; do |section|
  # Tweak DSL goes here . . .
end

</pre>
</div>
<p>As you already guessed you should fill <code>&lt;section&gt;</code> which the corresponding section. for example in case of <code>index</code> section you should
do like this <code>in_index</code> and provide a block for this method. Then you can tweak the index section as you want using the dashboard tweaking
DSL.</p><p>Let's start with the shared DSLs</p><h4 id="in-section">1.1 in_&lt;section&gt;</h4><p>In order to customize a section of a resource you need to specify the section first like this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
in_index do |index|
  # index section customization goes here . . .
end

</pre>
</div>
<p>Also you can do this for other sections too. In fact you have to.</p><h5 id="in-index">1.1.1 in_index</h5><p>TODO</p><h5 id="in-form">1.1.2 in_form</h5><p>TODO</p><h5 id="in-show">1.1.3 in_show</h5><p>Any customization you want to apply to <code>show</code> section will goes here. For example:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
in_show do |show|
  show.attributes :id, :name, :custom_method1
end

</pre>
</div>
<p>But if you don't do any customization, <code>show</code> section will create a list of all the
columns your resource have including the relations and possible attachment urls.</p><p>If you looked at the show list before, you may saw that <strong>Faalis</strong> returns the ruby
representation of each relationship in your resource. For example for a relationship
with <code>Faalis::User</code> you should see something like:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
#&lt;Faalis::User:0x007f22977b7a30&gt;

</pre>
</div>
<p>It's totally fine because <strong>Faalis</strong> does not know about your relationship context and
what field should be used on the relation object. It simply apply <code>to_s</code> on the relation
object.</p><p>So you can change this behavior by overriding your model <code>to_s</code> method. This way instead
of ruby representation of the relation object you'll see much more suitable string.</p><p>There are lots of way to fix this problem. For instance, as we mentioned earlier attribute
delegation and custom methods are always fine solutions.</p><h4 id="attributes">1.2 attributes</h4><p>You can specify the model fields that you wanted to show in the corresponding section like <code>index</code> or <code>form</code>.</p><p>for example assume we have a <code>Post</code> model like this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
# title       String
# content     Text
# user_id     Integer
# created_at  Datetime
# updated_at  Datetime
class Post
  belongs_to :user, class_name: 'Faalis::User'

  delegate :name, to: :user, prefix: true

  def rendered_content
    # render content using markdown
  end
end

</pre>
</div>
<p>By default all the fields in model will appear in the <code>index</code> section of your resource UI in dashboard. To reduce
the number of <code>attributes</code> in the <code>index</code> section all you have to do is to do this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
  # some where in your Dashboard::PostsController
  in_index do |index|
    index.attribtues :title, :user_name, :created_at

    # OR

    index.attributes except: [:updated_at, :content]
  end

</pre>
</div>
<p>Pretty simple right?</p><h4 id="attributes-properties">1.3 attributes_properties</h4><p>Some time you want to change the behavior in an specific section. For example you want to render an textarea
for a field instead of simple input in <code>form</code> section. You can achieve that with <code>attributes_properties</code>.</p><p>For example:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
in_form do 'form'
  form.attributes_properties name: { #name_properties }
end

</pre>
</div>
<p><code>name_properties</code> would be any <a href="https://github.com/justinfrench/formtastic">formtastic</a> configuration you needed.
It will directly apply to the given property.</p><h4 id="scope">1.4 scope</h4><p>Using this method you can override the default scope of a section (generally <code>index</code> section). By default <strong>Faalis</strong>
will use this scope on your Model:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">

Model.policy_scope(Model.order('created_at DESC').page(params[:page]))

</pre>
</div>
<p>This scope will order the result based on <code>created_at</code> and fetch a page only. Then it will pass the resulted scope
to scope class inside of the related <code>Pundit</code> policy. This way you can easily change the scope base on user permissions.
For more information checkout <code>Pundit</code> <a href="https://github.com/elabs/pundit#scopes">documents</a>.</p><h4 id="action-button">1.5 action_button</h4><p>Using this method you can define different buttons on action area of each section. For example you can simply add another
button in <code>index</code> section next to <code>add new</code> button. Each section has it's own action area. Defining new action buttons is
super easy:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">

  # inside Dashboard::PostController
  in_index do |index|
    index.action_button(label: t('Disable'), href: someaction_path,
                        class: 'btn-info', icon_button: 'remove')
  end

  # . . .

</pre>
</div>
<h4 id="tool-action">1.6 tool_action</h4><p>TODO</p>

        <h3>Feedback</h3>
        <p>
          You're encouraged to help improve the quality of this guide.
        </p>
        <p>
          Please contribute if you see any typos or factual errors.
          To get started, you can read our <a href="http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">documentation contributions</a> section.
        </p>
        <p>
          You may also find incomplete content, or stuff that is not up to date.
          Please do add any missing documentation for master. Make sure to check
          <a href="http://edgeguides.rubyonrails.org">Edge Guides</a> first to verify
          if the issues are already fixed or not on the master branch.
          Check the <a href="ruby_on_rails_guides_guidelines.html">Faalis Guides Guidelines</a>
          for style and conventions.
        </p>
        <p>
          If for whatever reason you spot something to fix but cannot patch it yourself, please
          <a href="https://github.com/rails/rails/issues">open an issue</a>.
        </p>
        <p>And last but not least, any kind of discussion regarding Ruby on Rails
          documentation is very welcome in the <a href="http://groups.google.com/group/rubyonrails-docs">rubyonrails-docs mailing list</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> License</p>
<p>"Faalis" and the Faalis logo are trademarks of Yellowen. All rights reserved.</p>

    </div>
  </div>

  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/responsive-tables.js"></script>
  <script type="text/javascript" src="javascripts/guides.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shCore.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushRuby.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushXml.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushSql.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushPlain.js"></script>
  <script type="text/javascript">
    SyntaxHighlighter.all();
    $(guidesIndex.bind);
  </script>
</body>
</html>
